(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[4],{35:function(e,t,a){"use strict";var n=a(40),r=a.n(n),s=a(41),c=a(42),i=a.n(c),o="54446aa39ef6f8361f9f28a334ac1cc9",l="https://api.themoviedb.org/3",u={getTrendingMovies:function(){return Object(s.a)(r.a.mark((function e(){var t,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("".concat(l,"/trending/movie/day?api_key=").concat(o));case 3:return t=e.sent,e.next=6,t.data;case 6:return a=e.sent,e.next=9,a.results;case 9:return n=e.sent,e.abrupt("return",n);case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()},searchMovie:function(e){return Object(s.a)(r.a.mark((function t(){var a,n,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.get("".concat(l,"/search/movie?api_key=").concat(o,"&query=").concat(e,"&language=en-US&page=1"));case 3:return a=t.sent,t.next=6,a.data;case 6:return n=t.sent,t.next=9,n.results;case 9:return s=t.sent,t.abrupt("return",s);case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},getMovieDetails:function(e){return Object(s.a)(r.a.mark((function t(){var a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.get("".concat(l,"/movie/").concat(e,"?api_key=").concat(o,"&language=en-US"));case 3:return a=t.sent,t.next=6,a.data;case 6:return n=t.sent,t.abrupt("return",n);case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},getMovieCast:function(e){return Object(s.a)(r.a.mark((function t(){var a,n,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.get("".concat(l,"/movie/").concat(e,"/credits?api_key=").concat(o,"&language=en-US"));case 3:return a=t.sent,t.next=6,a.data;case 6:return n=t.sent,t.next=9,n.cast;case 9:return s=t.sent,t.abrupt("return",s);case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},getMovieReviews:function(e){return Object(s.a)(r.a.mark((function t(){var a,n,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.get("".concat(l,"/movie/").concat(e,"/reviews?api_key=").concat(o,"&language=en-US"));case 3:return a=t.sent,t.next=6,a.data;case 6:return n=t.sent,t.next=9,n.results;case 9:return s=t.sent,t.abrupt("return",s);case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()}};t.a=u},74:function(e,t,a){e.exports={detailsContainer:"MovieDetailsPage_detailsContainer__mBvR_",details:"MovieDetailsPage_details__1bG4-",movieTitle:"MovieDetailsPage_movieTitle__ls7LA",genresList:"MovieDetailsPage_genresList__3DkXL",additionalInfo:"MovieDetailsPage_additionalInfo__3i-nJ"}},81:function(e,t,a){"use strict";a.r(t);var n=a(36),r=a(37),s=a(44),c=a(43),i=a(0),o=a(8),l=a(2),u=a(35),h=a(10),p=a(74),v=a.n(p),d=a(1),j=Object(i.lazy)((function(){return a.e(1).then(a.bind(null,76))})),m=Object(i.lazy)((function(){return a.e(6).then(a.bind(null,78))})),b=u.a.getMovieDetails,g=u.a.getMovieCast,f=u.a.getMovieReviews,x=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={img:"",title:"",year:"",userScore:"",overView:"",genres:[],cast:[],reviews:[]},e.handleGoBack=function(){var t=e.props,a=t.location,n=t.history;return a.state&&a.state.from?n.replace(a.state.from):n.push("/")},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;b(this.props.match.params.movieId).then((function(t){var a=new Date(t.release_date);return e.setState({img:"https://image.tmdb.org/t/p/w300/".concat(t.poster_path),title:t.original_title,year:a.getFullYear(),userScore:Math.round(10*t.vote_average),overView:t.overview,genres:t.genres})})),g(this.props.match.params.movieId).then((function(t){e.setState({cast:t})})),f(this.props.match.params.movieId).then((function(t){e.setState({reviews:t})}))}},{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:v.a.detailsContainer,children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{onClick:this.handleGoBack,children:"\u2190 Go back"}),Object(d.jsx)("img",{src:this.state.img,alt:"Movie poster"})]}),Object(d.jsxs)("div",{className:v.a.details,children:[Object(d.jsxs)("h1",{className:v.a.movieTitle,children:[this.state.title," ",this.state.year&&"(".concat(this.state.year,")")]}),Object(d.jsx)("span",{className:v.a.movieTitle,children:"User score: ".concat(this.state.userScore,"%")}),Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Overview"}),Object(d.jsx)("p",{children:this.state.overView})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Genres"}),Object(d.jsx)("ul",{className:v.a.genresList,children:this.state.genres.map((function(e){return Object(d.jsx)("li",{children:e.name},e.id)}))})]})]})]}),Object(d.jsxs)("div",{className:v.a.additionalInfo,children:[Object(d.jsx)("h2",{children:"Additional information"}),Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:Object(d.jsx)(o.b,{to:{pathname:"".concat(h.a.moviesPage,"/").concat(this.props.match.params.movieId,"/cast"),state:{from:this.props.location.state&&this.props.location.state.from&&this.props.location.state.from}},children:"Cast"})}),Object(d.jsx)("li",{children:Object(d.jsx)(o.b,{to:{pathname:"".concat(h.a.moviesPage,"/").concat(this.props.match.params.movieId,"/reviews"),state:{from:this.props.location.state&&this.props.location.state.from&&this.props.location.state.from}},children:"Reviews"})})]}),Object(d.jsx)(l.d,{children:Object(d.jsxs)(i.Suspense,{fallback:Object(d.jsx)("div",{children:"Loading..."}),children:[this.state.cast.length>0&&Object(d.jsx)(l.b,{exact:!0,path:"".concat(this.props.match.url,"/cast"),render:function(){return Object(d.jsx)(j,{cast:e.state.cast})}}),this.state.reviews.length>0?Object(d.jsx)(l.b,{exact:!0,path:"".concat(this.props.match.url,"/reviews"),render:function(){return Object(d.jsx)(m,{reviews:e.state.reviews})}}):Object(d.jsx)(l.b,{exact:!0,path:"".concat(this.props.match.url,"/reviews"),render:function(){return Object(d.jsx)("h3",{children:"We don't have any reviews for this movie"})}})]})})]})]})}}]),a}(i.Component);t.default=x}}]);
//# sourceMappingURL=movie-details-page.458bfa70.chunk.js.map