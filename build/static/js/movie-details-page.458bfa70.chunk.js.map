{"version":3,"sources":["services/movieRequest.js","components/pages/MovieDetailsPage/MovieDetailsPage.module.css","components/pages/MovieDetailsPage/MovieDetailsPage.js"],"names":["key","url","requests","getTrendingMovies","axios","get","response","data","results","moviesList","console","log","searchMovie","query","movies","getMovieDetails","id","movieDetails","getMovieCast","cast","movieCast","getMovieReviews","movieReviews","module","exports","Cast","lazy","Reviews","MovieDetailsPage","state","img","title","year","userScore","overView","genres","reviews","handleGoBack","props","location","history","from","replace","push","this","match","params","movieId","then","details","releaseDate","Date","release_date","setState","poster_path","original_title","getFullYear","Math","round","vote_average","overview","className","style","detailsContainer","onClick","src","alt","movieTitle","genresList","map","genre","name","additionalInfo","to","pathname","routes","moviesPage","fallback","length","exact","path","render","Component"],"mappings":"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","file":"static/js/movie-details-page.458bfa70.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst key = \"54446aa39ef6f8361f9f28a334ac1cc9\";\r\nconst url = \"https://api.themoviedb.org/3\";\r\n\r\nconst requests = {\r\n  async getTrendingMovies() {\r\n    try {\r\n      const response = await axios.get(\r\n        `${url}/trending/movie/day?api_key=${key}`\r\n      );\r\n      const data = await response.data;\r\n      const moviesList = await data.results;\r\n      return moviesList;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  },\r\n\r\n  async searchMovie(query) {\r\n    try {\r\n      const response = await axios.get(\r\n        `${url}/search/movie?api_key=${key}&query=${query}&language=en-US&page=1`\r\n      );\r\n      const data = await response.data;\r\n      const movies = await data.results;\r\n      return movies;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  },\r\n\r\n  async getMovieDetails(id) {\r\n    try {\r\n      const response = await axios.get(\r\n        `${url}/movie/${id}?api_key=${key}&language=en-US`\r\n      );\r\n      const movieDetails = await response.data;\r\n      return movieDetails;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  },\r\n  async getMovieCast(id) {\r\n    try {\r\n      const response = await axios.get(\r\n        `${url}/movie/${id}/credits?api_key=${key}&language=en-US`\r\n      );\r\n      const data = await response.data;\r\n      const movieCast = await data.cast;\r\n      return movieCast;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  },\r\n  async getMovieReviews(id) {\r\n    try {\r\n      const response = await axios.get(\r\n        `${url}/movie/${id}/reviews?api_key=${key}&language=en-US`\r\n      );\r\n      const data = await response.data;\r\n      const movieReviews = await data.results;\r\n      return movieReviews;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  },\r\n};\r\n\r\nexport default requests;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"detailsContainer\":\"MovieDetailsPage_detailsContainer__mBvR_\",\"details\":\"MovieDetailsPage_details__1bG4-\",\"movieTitle\":\"MovieDetailsPage_movieTitle__ls7LA\",\"genresList\":\"MovieDetailsPage_genresList__3DkXL\",\"additionalInfo\":\"MovieDetailsPage_additionalInfo__3i-nJ\"};","import React, { Component, Suspense, lazy } from \"react\";\r\nimport { Link, Switch, Route } from \"react-router-dom\";\r\nimport requests from \"../../../services/movieRequest\";\r\nimport routes from \"../../../services/routes\";\r\nimport style from \"./MovieDetailsPage.module.css\";\r\n\r\nconst Cast = lazy(() =>\r\n  import(\"../../Cast/Cast\" /* webpackChunkName: \"cast\" */)\r\n);\r\nconst Reviews = lazy(() =>\r\n  import(\"../../Reviews/Reviews\" /* webpackChunkName: \"reviews\" */)\r\n);\r\n\r\nconst { getMovieDetails, getMovieCast, getMovieReviews } = requests;\r\n\r\nclass MovieDetailsPage extends Component {\r\n  state = {\r\n    img: \"\",\r\n    title: \"\",\r\n    year: \"\",\r\n    userScore: \"\",\r\n    overView: \"\",\r\n    genres: [],\r\n    cast: [],\r\n    reviews: [],\r\n  };\r\n  componentDidMount() {\r\n    getMovieDetails(this.props.match.params.movieId).then((details) => {\r\n      const releaseDate = new Date(details.release_date);\r\n      return this.setState({\r\n        img: `https://image.tmdb.org/t/p/w300/${details.poster_path}`,\r\n        title: details.original_title,\r\n        year: releaseDate.getFullYear(),\r\n        userScore: Math.round(details.vote_average * 10),\r\n        overView: details.overview,\r\n        genres: details.genres,\r\n      });\r\n    });\r\n    getMovieCast(this.props.match.params.movieId).then((cast) => {\r\n      this.setState({\r\n        cast: cast,\r\n      });\r\n    });\r\n    getMovieReviews(this.props.match.params.movieId).then((reviews) => {\r\n      this.setState({ reviews: reviews });\r\n    });\r\n  }\r\n  handleGoBack = () => {\r\n    const { location, history } = this.props;\r\n    if (location.state && location.state.from) {\r\n      return history.replace(location.state.from);\r\n    }\r\n    return history.push(\"/\");\r\n  };\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className={style.detailsContainer}>\r\n          <div>\r\n            <button onClick={this.handleGoBack}>&larr; Go back</button>\r\n            <img src={this.state.img} alt=\"Movie poster\" />\r\n          </div>\r\n          <div className={style.details}>\r\n            <h1 className={style.movieTitle}>\r\n              {this.state.title} {this.state.year && `(${this.state.year})`}\r\n            </h1>\r\n            <span\r\n              className={style.movieTitle}\r\n            >{`User score: ${this.state.userScore}%`}</span>\r\n            <div>\r\n              <h2>Overview</h2>\r\n              <p>{this.state.overView}</p>\r\n            </div>\r\n            <div>\r\n              <h2>Genres</h2>\r\n              <ul className={style.genresList}>\r\n                {this.state.genres.map((genre) => {\r\n                  return <li key={genre.id}>{genre.name}</li>;\r\n                })}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className={style.additionalInfo}>\r\n          <h2>Additional information</h2>\r\n          <ul>\r\n            <li>\r\n              <Link\r\n                to={{\r\n                  pathname: `${routes.moviesPage}/${this.props.match.params.movieId}/cast`,\r\n                  state: {\r\n                    from:\r\n                      this.props.location.state &&\r\n                      this.props.location.state.from &&\r\n                      this.props.location.state.from,\r\n                  },\r\n                }}\r\n              >\r\n                Cast\r\n              </Link>\r\n            </li>\r\n            <li>\r\n              <Link\r\n                to={{\r\n                  pathname: `${routes.moviesPage}/${this.props.match.params.movieId}/reviews`,\r\n                  state: {\r\n                    from:\r\n                      this.props.location.state &&\r\n                      this.props.location.state.from &&\r\n                      this.props.location.state.from,\r\n                  },\r\n                }}\r\n              >\r\n                Reviews\r\n              </Link>\r\n            </li>\r\n          </ul>\r\n          <Switch>\r\n            <Suspense fallback={<div>Loading...</div>}>\r\n              {this.state.cast.length > 0 && (\r\n                <Route\r\n                  exact\r\n                  path={`${this.props.match.url}/cast`}\r\n                  render={() => <Cast cast={this.state.cast} />}\r\n                />\r\n              )}\r\n              {this.state.reviews.length > 0 ? (\r\n                <Route\r\n                  exact\r\n                  path={`${this.props.match.url}/reviews`}\r\n                  render={() => <Reviews reviews={this.state.reviews} />}\r\n                />\r\n              ) : (\r\n                <Route\r\n                  exact\r\n                  path={`${this.props.match.url}/reviews`}\r\n                  render={() => (\r\n                    <h3>We don't have any reviews for this movie</h3>\r\n                  )}\r\n                />\r\n              )}\r\n            </Suspense>\r\n          </Switch>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MovieDetailsPage;\r\n"],"sourceRoot":""}